<!DOCTYPE HTML>
<html>
<head>
    <title> 资源文件结构</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="../assets/css/dpl-min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/bui-min.css" rel="stylesheet" type="text/css" />

</head>
<body>

<div class="container">
    <div class="row">
        <form id="searchForm" class="form-horizontal span24">
            <div class="row form-actions actions-bar">
                <h3>查询条件</h3>
                <div class="control-group span8">
                    <label class="control-label">商品名：</label>
                    <div class="controls">
                        <input name="goods_name" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
                <div class="control-group span8">
                    <label class="control-label">产地：</label>
                    <div class="controls">
                        <input name="goods_address" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
                <div class="control-group span8">
                    <label class="control-label">商品名：</label>
                    <div class="controls">
                        <input name="goods_name" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
                <div class="control-group span8">
                    <label class="control-label">品牌：</label>
                    <div class="controls">
                        <input name="goods_brand" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
                <div class="control-group span8">
                    <label class="control-label">商品大分类：</label>
                    <div class="controls">
                        <select name="big_category">
                            <option value="0">毒药</option>
                            <option value="1">农产品</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span15 ">
                    <label class="control-label">生产日期：</label>
                    <div class="controls bui-form-group"  >
                        <input name="goods_adate" class="calendar" data-rules="{required:true}"  type="text">
                    </div>
                </div>
                <div class="control-group span8">
                    <label class="control-label">商品中分类：</label>
                    <div class="controls">
                        <select name="middle_category">
                            <option value="0">毒药</option>
                            <option value="1">农产品</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span15 ">
                    <label class="control-label">保质期：</label>
                    <div class="controls bui-form-group"  >
                        <input name="goods_bdate" class="calendar" data-rules="{required:true}"  type="text">
                    </div>
                </div>
                <div class="control-group span15">
                    <label class="control-label">审核状态：</label>
                    <div class="bui-form-group controls">
                        <label class="checkbox"><input name="ck" type="checkbox" value="1" />未审核</label>
                        <label class="checkbox"><input name="ck" type="checkbox" value="2" />驳回</label>
                        <label class="checkbox"><input name="ck" type="checkbox" value="3" />已通过</label>
                    </div>
                </div>
                <div class="control-group span8 offset1">
                    <div class="controls">
                        <button type="submit" id="btnSearch" class="button"><i class="icon-search"></i> 查询</button>
                        <button type="button" class="button btn-add"><i class="icon-search"></i> 添加</button>
                        <button type="reset" class="button"><i class="icon-refresh"></i> 清空</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="row">
        <div id="grid"></div>
    </div>

    <div id="content" class="hide">
        <form id="J_Form1" class="form-horizontal">
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">商品名：</label>
                    <div class="controls">
                        <input name="goods_name" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">产地：</label>
                    <div class="controls">
                        <input name="goods_address" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">商品名：</label>
                    <div class="controls">
                        <input name="goods_name" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">品牌：</label>
                    <div class="controls">
                        <input name="goods_brand" type="text" data-rules="" class="input-normal control-text">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">商品大分类：</label>
                    <div class="controls">
                        <select name="big_category">
                            <option value="0">毒药</option>
                            <option value="1">农产品</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span15 ">
                    <label class="control-label">生产日期：</label>
                    <div class="controls bui-form-group"  >
                        <input name="goods_adate" class="calendar" data-rules="{required:true}"  type="text">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">商品中分类：</label>
                    <div class="controls">
                        <select name="middle_category">
                            <option value="0">毒药</option>
                            <option value="1">农产品</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span15 ">
                    <label class="control-label">保质期：</label>
                    <div class="controls bui-form-group"  >
                        <input name="goods_bdate" class="calendar" data-rules="{required:true}"  type="text">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span15">
                    <label class="control-label">审核状态：</label>
                    <div class="bui-form-group controls">
                        <label class="checkbox"><input name="ck" type="checkbox" value="1" />未审核</label>
                        <label class="checkbox"><input name="ck" type="checkbox" value="2" />驳回</label>
                        <label class="checkbox"><input name="ck" type="checkbox" value="3" />已通过</label>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="control-group span8">
                    <label class="control-label">备注：</label>
                    <div class="controls">
                        <textarea name="goods_mark" rows="4"></textarea>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
</body>
<script type="text/javascript" src="../assets/js/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="../assets/js/bui-min.js"></script>
<script type="text/javascript" src="../assets/js/config-min.js"></script>

<script type="text/javascript">
    BUI.use(['bui/grid','bui/data','bui/overlay'],function (Grid,Data,Overlay) {
        var data = [{big_category_id:1,big_category_name:2}];
        var columns = [
                {title : '商品名',dataIndex :'goods_name'},
                {title : '商品ID',dataIndex :'goods_id'},
                {title : '单位',dataIndex :'goods_unit'},
                {title : '单价',dataIndex :'goods_price'},
                {title : '库存数量',dataIndex :'goods_num'},
                {title : '生产日期',dataIndex :'goods_adate'},
                {title : '保质期',dataIndex :'goods_bdate'},
                {title : '审核状态',dataIndex :'goods_status'},
            ],
            store = new Data.Store({
                url : 'data.php',
                autoLoad:true,
                pageSize:10
            }),
           grid = new Grid.Grid({
                render : '#grid',
                columns : columns,
                loadMask: true,
                width : 700,
                forceFit : true,
                store : store,
                plugins : [Grid.Plugins.CheckSelection],
                bbar:{
                  pageingBar:true
                }
            });
        grid.render();
        //创建表单，表单中的日历，不需要单独初始化
        var form = new BUI.Form.HForm({
            srcNode : '#searchForm'
        }).render();

        form.on('beforesubmit',function(ev) {
            //序列化成对象
            var obj = form.serializeToObject();
            obj.start = 0; //返回第一页
            store.load(obj);
            return false;
        });
        var dialog = new Overlay.Dialog({
            title:'新增商品',
            //配置DOM容器的编号
            contentId:'content',
            success:function () {
                var name = $('#goods_name').val();
                var mark = $('#big_category_mark').val();
                if (name == '') {
                    alert('请输入名称再提交！');
                    return;
                }
                $.ajax({
                    url: 'data.php',
                    type: 'get',
                    data: {name: name, mark: mark},
                    async: false,
                    success: function (data) {
                        alert(data);
                    }
                });
                this.close();
            }
        });
        $('.btn-add').click(function () {
            dialog.show();
        });
        var form1 = new BUI.Form.HForm({
            srcNode : '#J_Form1'
        }).render();
    });
</script>

</html>